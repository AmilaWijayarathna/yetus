<!---
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->

<html>
    <head>
        <meta charset="utf-8">
        <title>Apache Yetus</title>
		    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		    <meta name="description" content="">
		    <meta name="author" content="">

		    <link href="/assets/css/bootstrap.css" rel="stylesheet">
		    <link href="/assets/css/bootstrap-theme.css" rel="stylesheet">
                    <link href="/assets/css/font-awesome.css" rel="stylesheet">

		    <!-- JS -->
		    <script type="text/javascript" src="/assets/js/jquery-2.1.1.min.js"></script>
		    <script type="text/javascript" src="/assets/js/bootstrap.js"></script>
	</head>
    <body>
      <div class="navbar navbar-custom navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="img-responsive pull-left" href="/">
                <img src="/assets/img/yetus_logo.png" alt="Apache Yetus logo" />
            </a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/documentation/latest/">Documentation</a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Get Involved <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="/mailinglists"><i class="fa fa-commenting"></i> Mailing Lists</a>
                        </li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="http://issues.apache.org/jira/browse/YETUS"><i class="fa fa-bug"></i> JIRA (Bugs)</a>
                        </li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://git-wip-us.apache.org/repos/asf?s=yetus"><i class="fa fa-code"></i> Source (Apache)</a>
                        </li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://github.com/apache/yetus"><i class="fa fa-github-alt"></i> Source (GitHub)</a>
                        </li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="/contribute"><i class="fa fa-code-fork"></i> Contributing</a>
                        </li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/ApacheYetus"><i class="fa fa-twitter"></i> @ApacheYetus</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="http://www.apache.org">Apache Homepage</a>
                            </li>
                            <li><a href="http://www.apache.org/licenses/">Apache License</a>
                            </li>
                            <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
                            </li>
                            <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a>
                            </li>
                            <li><a href="http://www.apache.org/security/">Security</a>
                            </li>
                        </ul>
                    </li>
                </li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

      <div class="container">
        <!---
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->

<h1 id="build-tool-support">Build Tool Support</h1>

<p>test-patch has the ability to support multiple build tools.  Build tool plug-ins have some extra hooks to do source and object maintenance at key points. Every build tool plug-in must have one line in order to be recognized:</p>
<pre class="highlight shell"><code>add_build_tool &lt;pluginname&gt;
</code></pre>

<h1 id="global-variables">Global Variables</h1>

<ul>
<li><p>BUILDTOOLCWD</p>

<ul>
<li>If the build tool does not always run from the ${BASEDIR} and instead needs to change the current working directory to work on a specific module, then set this to true.  The default is false.</li>
</ul></li>
<li><p>UNSUPPORTED_TEST</p>

<ul>
<li>If pluginname_modules_worker is given a test type that is not supported by the build system, set UNSUPPORTED<em>TEST=true.  If it is supported, set UNSUPPORTED</em>TEST=false.</li>
</ul></li>
</ul>

<p>For example, the gradle build tool does not have a standard way to execute checkstyle. So when checkstyle is requested, gradle_modules_worker sets UNSUPPORTED_TEST to true and returns out of the routine.</p>

<h1 id="required-functions">Required Functions</h1>

<ul>
<li><p>pluginname_buildfile</p>

<ul>
<li>This should be an echo of the file that controls the build system.  This is used for module determination.</li>
</ul></li>
<li><p>pluginname_executor</p>

<ul>
<li>This should be an echo of how to run the build tool, any extra arguments, etc.</li>
</ul></li>
<li><p>pluginname_modules_worker</p>

<ul>
<li>Input is the branch and the test being run.  This should call modules<em>workers with the generic parts to run that test on the build system.  For example, if it is convention to use &lsquo;test&rsquo; to trigger &#39;unit&rsquo; tests, then module</em>workers should be called with &#39;test&rsquo; appended onto its normal parameters.</li>
</ul></li>
<li><p>pluginname_builtin_personality_modules</p>

<ul>
<li>Default method to determine how to enqueue modules for processing.  Note that personalities may override this function.</li>
</ul></li>
<li><p>pluginname_builtin_personality_file_tests</p>

<ul>
<li>Default method to determine which tests to trigger.  Note that personalities may override this function.</li>
</ul></li>
</ul>

<h1 id="optional-functions">Optional Functions</h1>

<ul>
<li><p>pluginname_postapply_install</p>

<ul>
<li>After the install step, this allows the build tool plug-in to do extra work.</li>
</ul></li>
<li><p>pluginname_parse_args</p>

<ul>
<li>executed prior to any other above functions except for pluginname_usage. This is useful for parsing the arguments passed from the user and setting up the execution environment.</li>
</ul></li>
<li><p>pluginname_initialize</p>

<ul>
<li>After argument parsing and prior to any other work, the initialize step allows a plug-in to do any precursor work, set internal defaults, etc.</li>
</ul></li>
<li><p>pluginname_count_(test)_probs</p>

<ul>
<li>Certain language test plug-ins require assistance from the build tool to count problems in the compile log due to some tools having custom handling for those languages.  The test plug-in name should be in the (test) part of the function name.</li>
</ul></li>
</ul>

<h1 id="ant-specific">Ant Specific</h1>

<h2 id="command-arguments">Command Arguments</h2>

<p>test-patch always passes -noinput to Ant.  This forces ant to be non-interactive.</p>

<h1 id="gradle-specific">Gradle Specific</h1>

<p>The gradle plug-in always rebuilds the gradlew file and uses gradlew as the method to execute commands.</p>

<h1 id="maven-specific">Maven Specific</h1>

<h2 id="command-arguments">Command Arguments</h2>

<p>test-patch always passes &ndash;batch-mode to maven to force it into non-interactive mode.  Additionally, some tests will also force -fae in order to get all of messages/errors during that mode. Some tests are executed with -DskipTests.  Additional arguments should be handled via the personality.</p>

<h2 id="test-profile">Test Profile</h2>

<p>By default, test-patch will pass -Ptest-patch to Maven. This will allow you to configure special actions that should only happen when running underneath test-patch.</p>

<h2 id="custom-maven-tests">Custom Maven Tests</h2>

<ul>
<li>Maven will trigger a maven install as part of the precompile.</li>
<li>Maven will test eclipse integration as part of the postcompile.</li>
<li>If src/site is modified, maven site tests are executed.</li>
</ul>

	  </div>
      <div class="container">
    <hr>
    <footer class="footer">
        <div class="row-fluid">
            <div class="span12 text-left">
                            <div class="span12">
                Copyright 2008-2015 <a href="http://www.apache.org/">Apache Software Foundation</a>. Licensed under the <a href="http://www.apache.org/licenses/">Apache License v2.0</a>. Apache Yetus and the Apache feather logo are trademarks of The Apache Software Foundation.
                            </div>
            </div>

        </div>

    </footer>
</div>

	</body>
</html>
